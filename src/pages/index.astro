---
// æ”¹åŠ¨ï¼šåˆ é™¤äº†ä¸å†ä½¿ç”¨çš„ Button ç»„ä»¶å¯¼å…¥
// import { Button } from 'free-astro-components'
import Footer from '../components/Footer.astro'
import Header from '../components/Header.astro'
import Hero from '../sections/Hero.astro'
import Intro from '../sections/Intro.astro'
import Layout from '../layouts/Layout.astro'
import Sidebar from '../layouts/Sidebar.astro'
---

<Layout title="welcome come on~">
  <Sidebar class="lg:hidden" />
  <Header />
  <main>
    <Hero
      align="center"
      title="ç‚¹å…”é¢‘é“ï½œæœ¨ç»“æ„è¡—é“æœåŠ¡å™¨"
      description="è¯·é—®æ‚¨ä»Šå¤©è¦æ¥ç‚¹Minecraftå—ï¼Ÿ"
      bgImage="/background.png" 
    >
      <div class="flex flex-wrap justify-center items-center gap-4">
        {/* 
          æ”¹åŠ¨ï¼šå°† <Button> ç»„ä»¶æ›¿æ¢ä¸ºåŸç”Ÿçš„ <a> æ ‡ç­¾ï¼Œ
          å¹¶ç›´æ¥åº”ç”¨ btn-glass classï¼Œä»¥ç¡®ä¿æ ·å¼å®Œå…¨ç»Ÿä¸€ã€‚
        */}
        <a href="/guide/server_guide" class="btn-glass">
          ğŸ“– æŸ¥çœ‹æœåŠ¡å™¨æŒ‡å—
        </a>

        <div class="relative" data-dropdown-container>
          <button
            type="button"
            class="btn-glass dropdown-trigger flex items-center justify-center gap-2"
            aria-haspopup="true"
            aria-expanded="false"
          >
            ğŸ§ åŠ å…¥ç¤¾åŒº <span class="text-xs">â–¼</span>
          </button>
          <div
            class="dropdown-menu absolute top-full mt-2 w-48 origin-top-left rounded-md bg-white p-2 text-left shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none transition-all duration-150 ease-out"
            role="menu"
            aria-orientation="vertical"
          >
            <a
              href="https://qm.qq.com/q/fZDqrHvjHO"
              target="_blank"
              class="block w-full rounded-md px-4 py-2 text-sm text-zinc-700 hover:bg-zinc-100"
              role="menuitem"
            >
              åŠ å…¥QQç¾¤
            </a>
            <a
              href="https://pd.qq.com/s/57mw8fwlg?b=5"
              target="_blank"
              class="block w-full rounded-md px-4 py-2 text-sm text-zinc-700 hover:bg-zinc-100"
              role="menuitem"
            >
              åŠ å…¥QQé¢‘é“
            </a>
          </div>
        </div>
      </div>
    </Hero>
    <Intro />
  </main>
  <Footer />
</Layout>

<style>
  /* ç»ç’ƒæ‹Ÿæ€ï¼ˆåŠé€æ˜ï¼‰æ ·å¼ */
  .btn-glass {
    background-color: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(4px);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.4);
    font-weight: 500;
    
    /* æ ¸å¿ƒï¼šä¸ºæ‰€æœ‰æŒ‰é’®å¼ºåˆ¶ç»Ÿä¸€å°ºå¯¸å’Œå¯¹é½æ–¹å¼ */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem; /* 0.5rem ä¸Šä¸‹, 1rem å·¦å³ */
    border-radius: 0.375rem; /* 6px */
    transition: background-color 0.2s, border-color 0.2s;
    text-decoration: none; /* ç¡®ä¿ a æ ‡ç­¾æ²¡æœ‰ä¸‹åˆ’çº¿ */
  }
  .btn-glass:hover {
    background-color: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.6);
  }
  .btn-glass:focus-visible {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
    outline: none;
  }

  /* ä¸‹æ‹‰èœå•æ ·å¼ä¿æŒä¸å˜ */
  .dropdown-menu {
    opacity: 0;
    transform: scale(0.95) translateY(-10px);
    visibility: hidden;
  }

  [data-dropdown-container].open .dropdown-menu {
    opacity: 1;
    transform: scale(1) translateY(0);
    visibility: visible;
  }
</style>

<script>
  function initializeDropdown() {
    const dropdownContainer = document.querySelector('[data-dropdown-container]');
    if (!dropdownContainer) return;

    const triggerButton = dropdownContainer.querySelector('.dropdown-trigger');
    if (!triggerButton) return;
    
    let openTimeout: ReturnType<typeof setTimeout> | undefined;
    let closeTimeout: ReturnType<typeof setTimeout> | undefined;

    const openMenu = () => {
      dropdownContainer.classList.add('open');
      triggerButton.setAttribute('aria-expanded', 'true');
    };

    const closeMenu = () => {
      dropdownContainer.classList.remove('open');
      triggerButton.setAttribute('aria-expanded', 'false');
    };
    
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

    if (isTouchDevice) {
      triggerButton.addEventListener('click', (event) => {
        event.stopPropagation();
        const isOpen = dropdownContainer.classList.toggle('open');
        triggerButton.setAttribute('aria-expanded', String(isOpen));
      });

      document.addEventListener('click', (event) => {
        if (!dropdownContainer.contains(event.target as Node)) {
          closeMenu();
        }
      });
    } else {
      dropdownContainer.addEventListener('mouseenter', () => {
        clearTimeout(closeTimeout);
        openTimeout = setTimeout(openMenu, 200);
      });

      dropdownContainer.addEventListener('mouseleave', () => {
        clearTimeout(openTimeout);
        closeTimeout = setTimeout(closeMenu, 300);
      });
    }
    
    const menuLinks = dropdownContainer.querySelectorAll('.dropdown-menu a');
    menuLinks.forEach(link => {
        link.addEventListener('click', () => {
            clearTimeout(closeTimeout);
            closeMenu();
        });
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && dropdownContainer.classList.contains('open')) {
        clearTimeout(closeTimeout);
        closeMenu();
      }
    });
  }

  initializeDropdown();
  
  document.addEventListener('astro:after-swap', initializeDropdown);
</script>